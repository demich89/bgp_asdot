<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BGP ASN Converter</title>
<style>

/* ---------- THEME VARIABLES ---------- */
:root {
    --bg: #ffffff;
    --fg: #000000;
    --box: #f4f4f4;
}
.dark {
    --bg: #111111;
    --fg: #eeeeee;
    --box: #222222;
}

/* ---------- UI ---------- */
body {
    font-family: monospace;
    background: var(--bg);
    color: var(--fg);
    margin: 0;
}
#container {
    max-width: 600px;
    margin: auto;
    padding: 16px;
}

#back-button {
    font-size: 18px;
    padding: 10px 14px;
    border-radius: 6px;
    border: 1px solid #666;
    background: var(--box);
    color: var(--fg);
    cursor: pointer;
}
#back-button:hover {
    background: #ccc;
}

#theme-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    cursor: pointer;
}

#moon, #sun {
    stroke: var(--fg);
}
#moon { display: block; }
#sun { display: none; }

input[type="text"] {
    width: 100%;
    font-size: 20px;
    padding: 10px;
    margin-top: 6px;
    border-radius: 6px;
    border: 1px solid #444;
    background: var(--box);
    color: var(--fg);
}

button {
    width: 100%;
    padding: 12px;
    margin-top: 14px;
    font-size: 20px;
    border: none;
    border-radius: 6px;
    background: #2979ff;
    color: white;
    cursor: pointer;
}
button:hover {
    background: #1c54b2;
}

.result {
    margin-top: 14px;
    font-size: 20px;
}

.historyItem {
    background: var(--box);
    padding: 10px;
    margin-top: 6px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 17px;
    border: 1px solid #333;
}

</style>
</head>
<body>

<div id="container">

<!-- TOP BAR -->
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">

    <button id="back-button" onclick="window.history.back()">
        ðŸ”™ Back
    </button>

    <button id="theme-toggle">
        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg>
        <svg id="sun"  xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
    </button>
</div>

<h3>BGP ASN Converter (ASDOT â‡† ASPLAIN)</h3>

<details style="background:var(--box);padding:10px;border-radius:6px;border:1px solid #333;margin-bottom:14px">
    <summary><b>How the conversion works (with example)</b></summary>

    <p><b>Example input:</b> 1.10</p>

    <p><u>Step 1 â€” Split the two parts</u><br>
    High = 1<br>
    Low = 10</p>

    <p><u>Step 2 â€” Apply the formula</u><br>
    ASPLAIN = (High Ã— 65536) + Low<br>
    ASPLAIN = (1 Ã— 65536) + 10<br>
    ASPLAIN = <b>65546</b></p>

    <hr>

    <p><b>Reverse conversion example:</b> 65546</p>

    <p><u>Step 1 â€” Find the High value</u><br>
    High = floor(65546 / 65536) = 1</p>
    <small><i>floor() means always round down to the nearest integer</i>
    <p>example 10/3 = 3 <br>
    example 7/4 = 1 <br>
    example 5/2 = 2 <br>
    </small></p>


    
    <p><u>Step 2 â€” Find the Low value</u><br>
    Low = 65546 mod 65536 = 10</p>
    <small><i>mod means the remainder after division</i>
    <p>example 10 mod 3 = 1 (3 goes into 10 three times, remainder 1)<br>
    example 7 mod 4 = 3 (4 goes into 7 once, remainder 3)<br>
    example 5 mod 2 = 1 (2 goes into 5 twice, remainder 1)<br>
    </small></p>

    <p><u>Result</u><br>
    ASDOT = 1.10</p>
</details>

<input id="asn" type="text" placeholder="Enter ASN (e.g. 1.10 or 65546)">
<button onclick="convert()">Convert</button>

<p class="result">ASDOT: <span id="outdot"></span></p>
<p class="result">ASPLAIN: <span id="outlong"></span></p>

<p>History</p>
<div id="history"></div>
<button onclick="clearHistory()">Clear history</button>

</div>

<script>
function loadHistory() {
    let h = JSON.parse(localStorage.getItem("asn_history") || "[]");
    let div = document.getElementById("history");
    div.innerHTML = "";
    for (let item of h.slice().reverse()) {
        let el = document.createElement("div");
        el.className = "historyItem";
        el.textContent = `Input: ${item.input} | ASDOT: ${item.dot} | ASPLAIN: ${item.long}`;
        el.onclick = () => { document.getElementById("asn").value = item.input; convert(); }
        div.appendChild(el);
    }
}
function saveHistory(input, dot, long) {
    let h = JSON.parse(localStorage.getItem("asn_history") || "[]");
    h.push({input, dot, long});
    if (h.length > 50) h.shift();
    localStorage.setItem("asn_history", JSON.stringify(h));
}
function convert() {
    const input = document.getElementById("asn").value.trim();
    if (!input) return;
    let dotVal, longVal;
    if (input.includes(".")) {
        const [hi, lo] = input.split(".");
        longVal = Number(hi) * 65536 + Number(lo);
        dotVal = input;
    } else {
        const n = Number(input);
        dotVal = Math.floor(n / 65536) + "." + (n % 65536);
        longVal = n;
    }
    document.getElementById("outdot").textContent = dotVal;
    document.getElementById("outlong").textContent = longVal;
    saveHistory(input, dotVal, longVal);
    loadHistory();
}
function clearHistory() {
    localStorage.removeItem("asn_history");
    loadHistory();
}

// --- Theme toggle ---
const sun = document.getElementById("sun");
const moon = document.getElementById("moon");
function setTheme(mode) {
    if (mode === "dark") {
        document.body.classList.add("dark");
        sun.style.display = "block";
        moon.style.display = "none";
    } else {
        document.body.classList.remove("dark");
        sun.style.display = "none";
        moon.style.display = "block";
    }
    localStorage.setItem("asn_theme", mode);
}
document.getElementById("theme-toggle").onclick = () => {
    setTheme(document.body.classList.contains("dark") ? "light" : "dark");
};
setTheme(localStorage.getItem("asn_theme") || "light");

// INIT
loadHistory();
</script>

</body>
</html>